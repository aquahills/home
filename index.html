<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Aquahills Beverages</title>
<link rel="stylesheet" href="css/style.css">

<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

<style>

/* Larger Logo */
.logo{
height:110px;
}

/* Responsive logo */
@media(max-width:768px){
.logo{
height:85px;
}
}

/* Improved Hero */
.hero{
padding:80px 20px 50px;
}

.hero h1{
font-size:42px;
max-width:800px;
margin:auto;
line-height:1.3;
}

@media(max-width:768px){
.hero h1{
font-size:26px;
}
}

/* Professional Footer */
.footer{
background:rgba(0,0,0,.5);
padding:50px 20px 25px;
}

.footer-container{
display:flex;
justify-content:center;
gap:60px;
flex-wrap:wrap;
text-align:center;
}

.footer-container div{
min-width:220px;
}

.footer h3{
font-size:20px;
margin-bottom:10px;
}

.footer h4{
font-size:16px;
margin-bottom:10px;
opacity:.9;
}

.footer p{
font-size:14px;
opacity:.8;
}

.certifications{
margin-top:15px;
padding:12px;
background:rgba(255,255,255,.1);
border-radius:12px;
font-weight:600;
}

.footer-bottom{
margin-top:30px;
text-align:center;
opacity:.6;
font-size:13px;
}

/* Extra Mobile Optimisation */
@media(max-width:480px){

nav{
flex-direction:column;
gap:10px;
}

.hero{
padding:60px 15px 40px;
}

.primary-btn{
width:100%;
max-width:280px;
}

.carousel{
flex-direction:column;
align-items:center;
}

.card{
width:100%;
max-width:340px;
}

.footer-container{
flex-direction:column;
gap:25px;
}

}

</style>
</head>

<body>

<header>
<img src="assets/logo.png" class="logo"/>

<nav>
<button id="ordersBtn">Orders</button>
<button id="loginNavBtn">Login</button>
</nav>
</header>

<main id="mainContent">

<section class="hero" id="heroSection">
<h1>Premium Drinking Water for Home & Business</h1>
<button id="mainActionBtn" class="primary-btn">
Order Now
</button>
</section>

<section class="carousel-container">
<div class="carousel">
<div class="card">
<h2>Advanced RO + UV</h2>
<p>Multi stage purification ensures maximum safety and mineral balance.</p>
</div>

<div class="card">
<h2>Doorstep Delivery</h2>
<p>Reliable delivery service for homes, offices and businesses.</p>
</div>

<div class="card">
<h2>BIS Certified</h2>
<p>Quality tested before every dispatch to maintain standards.</p>
</div>
</div>
</section>

</main>

<footer class="footer">
<div class="footer-container">

<div>
<h3>Aquahills Beverages</h3>
<p>Pure & Safe Drinking Water</p>

<div class="certifications">
ISI Certified <br>
BIS Certified
</div>
</div>

<div>
<h4>Contact</h4>
<p>Phone: +91 9876543210</p>
<p>Email: support@aquahills.com</p>
</div>

<div>
<h4>Location</h4>
<p>Ghaziabad, Uttar Pradesh</p>
</div>

</div>

<p class="footer-bottom">
© 2026 Aquahills Beverages | All Rights Reserved
</p>

</footer>

<script src="js/firebase.js"></script>

<script>
document.addEventListener("DOMContentLoaded",()=>{

const loginBtn=document.getElementById("loginNavBtn")
const mainActionBtn=document.getElementById("mainActionBtn")
const ordersBtn=document.getElementById("ordersBtn")

firebase.auth().onAuthStateChanged(async user=>{

if(user){

loginBtn.textContent="Logout"
loginBtn.onclick=()=>firebase.auth().signOut().then(()=>location.reload())

const userDoc=await db.collection("users").doc(user.uid).get()

if(!userDoc.exists){
console.error("User document missing")
return
}

const data=userDoc.data()
const role=data.role ? data.role.trim().toLowerCase() : "customer"

/* ADMIN */
if(role==="admin"){
mainActionBtn.textContent="Admin Controls"
mainActionBtn.onclick=()=>location.href="admin.html"
ordersBtn.onclick=()=>loadActiveOrders()
}

/* DELIVERY */
else if(role==="delivery"){
mainActionBtn.textContent="Assigned Orders"
mainActionBtn.onclick=()=>loadAssignedOrders(user.uid)
ordersBtn.onclick=()=>loadAssignedOrders(user.uid)
}

/* CUSTOMER */
else{
mainActionBtn.textContent="Order Now"
mainActionBtn.onclick=()=>location.href="order.html"
ordersBtn.onclick=()=>location.href="orders.html"
}

}
else{
loginBtn.textContent="Login"
loginBtn.onclick=()=>location.href="login.html"

mainActionBtn.textContent="Order Now"
mainActionBtn.onclick=()=>location.href="order.html"

ordersBtn.onclick=()=>location.href="orders.html"
}

})

})

/* ADMIN ACTIVE ORDERS */
async function loadActiveOrders(){

const snap=await db.collection("orders")
.where("status","!=","Delivered")
.get()

let rows=""

for(const doc of snap.docs){
const o=doc.data()
const uDoc=await db.collection("users").doc(o.customerId).get()
const u=uDoc.data()||{}

rows+=`
<tr>
<td>${u.name||""}</td>
<td>${u.phone||""}</td>
<td>${o.bottles}</td>
<td>₹${o.total}</td>
<td>
<button class="success-btn" onclick="markDelivered('${doc.id}')">
Mark Delivered
</button>
</td>
</tr>`
}

renderTable("Active Orders",rows)
}

/* DELIVERY ASSIGNED ORDERS */
async function loadAssignedOrders(uid){

const snap=await db.collection("orders")
.where("assignedTo","==",uid)
.where("status","!=","Delivered")
.get()

let rows=""

for(const doc of snap.docs){
const o=doc.data()
const uDoc=await db.collection("users").doc(o.customerId).get()
const u=uDoc.data()||{}

rows+=`
<tr>
<td>${u.name||""}</td>
<td>${u.phone||""}</td>
<td>${o.bottles}</td>
<td>₹${o.total}</td>
<td>
<button class="success-btn" onclick="markDelivered('${doc.id}')">
Mark Delivered
</button>
</td>
</tr>`
}

renderTable("Assigned Orders",rows)
}

/* COMMON TABLE RENDER */
function renderTable(title,rows){

document.getElementById("heroSection").style.display="none"
document.querySelector(".carousel-container").style.display="none"

document.getElementById("mainContent").innerHTML=`
<div class="dashboard-card">
<h2 style="margin-bottom:20px;text-align:center;">${title}</h2>
<table>
<tr>
<th>Name</th>
<th>Phone</th>
<th>Bottles</th>
<th>Total</th>
<th>Action</th>
</tr>
${rows||"<tr><td colspan='5'>No Orders</td></tr>"}
</table>
</div>`
}

async function markDelivered(id){
await db.collection("orders").doc(id).update({status:"Delivered"})
location.reload()
}
</script>

</body>
</html>
